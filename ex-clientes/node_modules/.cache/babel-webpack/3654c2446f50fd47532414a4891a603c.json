{"ast":null,"code":"import _asyncToGenerator from \"/home/victor/Documents/codes/pos/angular/app-unipar2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/shared/services/auth.service\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"@angular/forms\";\nexport class LoginComponent {\n  constructor(activatedRoute, authService, router, toastr) {\n    this.activatedRoute = activatedRoute;\n    this.authService = authService;\n    this.router = router;\n    this.toastr = toastr;\n    this.usuario = {\n      userName: null,\n      password: null\n    };\n    this.execLogin = true;\n  }\n\n  ngOnInit() {\n    this.inscricao = this.activatedRoute.queryParams.subscribe(param => {\n      this.forward = param.forward;\n    });\n    this.getUserLoggedIn();\n  }\n\n  ngOnDestroy() {\n    var _a;\n\n    (_a = this.inscricao) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n  }\n\n  getUserLoggedIn() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const token = localStorage.getItem('token');\n\n      if (token && token !== 'null' && token !== 'undefined') {\n        yield _this.getUserFromToken();\n      } else {\n        _this.cleanLocalResources();\n\n        _this.execLogin = false;\n      }\n    })();\n  }\n\n  redirectAfterLogin(user) {\n    this.authService.usuario = user;\n    this.authService.usuarioAutenticado = true;\n    this.authService.onUserChange.emit(user);\n    this.router.navigate([this.forward || '/']);\n  }\n\n  cleanLocalResources() {\n    localStorage.removeItem('token');\n  }\n\n  getUserFromToken() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.authService.getUserFromToken().subscribe(response => {\n        _this2.redirectAfterLogin(response);\n      }, error => {\n        _this2.cleanLocalResources();\n\n        _this2.authService.usuarioAutenticado = true;\n      });\n    })();\n  }\n\n  fazerLogin() {\n    if ((this.usuario.userName || '').trim().length === 0 || (this.usuario.password || '').trim().length === 0) {\n      this.toastr.warning('Informe o Usuário e Senha!');\n      return;\n    }\n\n    this.authService.login(this.usuario.userName, this.usuario.password).subscribe(response => {\n      localStorage.setItem('token', response.token);\n      this.redirectAfterLogin(response);\n    }, error => {\n      this.cleanLocalResources();\n\n      if (error.error && error.error.status === 401) {\n        this.toastr.error('Login/Senha inválidos');\n      } else {\n        this.toastr.error(error.error.message || error.message || 'Login/Senha inválidos');\n      }\n    });\n  }\n\n}\n\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i3.ToastrService));\n};\n\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 20,\n  vars: 2,\n  consts: [[\"id\", \"banner\"], [1, \"card\", \"card-container\", \"opac\", \"fade-login\"], [\"id\", \"profile-img\", \"alt\", \"Bem vindo\", \"src\", \"../../../assets/imagens/angular.png\", 1, \"profile-img-card\"], [1, \"text-center\"], [\"id\", \"profile-name\", 1, \"profile-name-card\"], [1, \"form-signin\", \"fade-in\", \"fade-in-left\", 3, \"ngSubmit\"], [\"id\", \"reauth-email\", 1, \"reauth-email\"], [1, \"input-group\", \"mb-3\"], [1, \"input-group-prepend\"], [1, \"input-group-text\"], [1, \"fa\", \"fa-user\"], [\"type\", \"text\", \"name\", \"userName\", \"placeholder\", \"Usu\\u00E1rio\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"fas\", \"fa-lock\"], [\"type\", \"password\", \"placeholder\", \"Senha\", \"name\", \"password\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-lg\", \"btn-success\", \"btn-signin\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelement(2, \"img\", 2);\n      i0.ɵɵelementStart(3, \"h3\", 3);\n      i0.ɵɵtext(4, \"Bem vindo\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(5, \"p\", 4);\n      i0.ɵɵelementStart(6, \"form\", 5);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_6_listener() {\n        return ctx.fazerLogin();\n      });\n      i0.ɵɵelement(7, \"span\", 6);\n      i0.ɵɵelementStart(8, \"div\", 7);\n      i0.ɵɵelementStart(9, \"div\", 8);\n      i0.ɵɵelementStart(10, \"span\", 9);\n      i0.ɵɵelement(11, \"i\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"input\", 11);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_12_listener($event) {\n        return ctx.usuario.userName = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 7);\n      i0.ɵɵelementStart(14, \"div\", 8);\n      i0.ɵɵelementStart(15, \"span\", 9);\n      i0.ɵɵelement(16, \"i\", 12);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"input\", 13);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_17_listener($event) {\n        return ctx.usuario.password = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"button\", 14);\n      i0.ɵɵtext(19, \" Login \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"ngModel\", ctx.usuario.userName);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.usuario.password);\n    }\n  },\n  directives: [i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i4.DefaultValueAccessor, i4.RequiredValidator, i4.NgControlStatus, i4.NgModel],\n  styles: [\"#banner[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n  position: relative;\\n  padding-top: 70px;\\n}\\n\\n#banner[_ngcontent-%COMP%]:after {\\n  content: \\\"\\\";\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  left: 0;\\n  bottom: 0;\\n  width: 100%;\\n  height: 100vh;\\n  opacity: 0.35;\\n  z-index: -1;\\n  background-color: #404040;\\n  background-size: cover;\\n}\\n\\n.card-container.card[_ngcontent-%COMP%] {\\n  width: 390px;\\n  margin-bottom: 0px;\\n  border-color: #ddd !important;\\n  box-shadow: none !important;\\n  background-color: #ffffffad;\\n}\\n\\n.btn[_ngcontent-%COMP%] {\\n  font-weight: 700;\\n  height: 36px;\\n  -webkit-user-select: none;\\n  user-select: none;\\n  cursor: default;\\n}\\n\\n\\n\\n.card[_ngcontent-%COMP%] {\\n  border-color: #ddd !important;\\n  box-shadow: none !important;\\n  opacity: 1;\\n  padding: 20px 55px 50px;\\n  margin: 0 auto 25px;\\n  border-radius: 60px;\\n}\\n\\n.profile-img-card[_ngcontent-%COMP%] {\\n  margin: 0 auto;\\n  display: block;\\n  max-height: 150px;\\n  width: auto;\\n  border-radius: 100px;\\n}\\n\\n\\n\\n.profile-name-card[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n  font-weight: bold;\\n  text-align: center;\\n  margin: 10px 0 0;\\n  min-height: 1em;\\n}\\n\\n.reauth-email[_ngcontent-%COMP%] {\\n  display: block;\\n  color: #404040;\\n  line-height: 2;\\n  margin-bottom: 10px;\\n  font-size: 14px;\\n  text-align: center;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  box-sizing: border-box;\\n}\\n\\n.form-signin[_ngcontent-%COMP%] {\\n  text-align: center;\\n}\\n\\n.form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus {\\n  border-color: #6891a2;\\n  outline: 0;\\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px #6891a2;\\n}\\n\\n.form-signin[_ngcontent-%COMP%]   i.fa[_ngcontent-%COMP%], .form-signin[_ngcontent-%COMP%]   i.fas[_ngcontent-%COMP%] {\\n  width: 13px;\\n  text-align: center;\\n}\\n\\n.btn-signin[_ngcontent-%COMP%] {\\n  background-color: #0c6121;\\n  padding: 0px;\\n  font-weight: 700;\\n  font-size: 14px;\\n  height: 36px;\\n  width: 120px;\\n  border-radius: 3px;\\n  border: none;\\n  transition: all 0.218s;\\n}\\n\\n.btn-signin[_ngcontent-%COMP%]:hover, .btn-signin[_ngcontent-%COMP%]:active, .btn-signin[_ngcontent-%COMP%]:focus {\\n  background-color: #025517;\\n  box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.5);\\n}\\n\\n.input-group-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n  padding: 4px 0px;\\n}\\n\\na[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n}\\n\\n.fade-login[_ngcontent-%COMP%] {\\n  animation: fade-login 2s cubic-bezier(0.39, 0.575, 0.565, 1) both;\\n}\\n\\n@keyframes fade-login {\\n  0% {\\n    opacity: 0;\\n  }\\n  100% {\\n    opacity: 1;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGlCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxXQUFBO0VBQ0Esa0JBQUE7RUFDQSxNQUFBO0VBQ0EsUUFBQTtFQUNBLE9BQUE7RUFDQSxTQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7RUFDQSxhQUFBO0VBQ0EsV0FBQTtFQUNBLHlCQUFBO0VBR0Esc0JBQUE7QUFDRjs7QUFFQTtFQUNFLFlBQUE7RUFDQSxrQkFBQTtFQUNBLDZCQUFBO0VBQ0EsMkJBQUE7RUFDQSwyQkFBQTtBQUNGOztBQUVBO0VBQ0UsZ0JBQUE7RUFDQSxZQUFBO0VBRUEseUJBQUE7RUFDQSxpQkFBQTtFQUNBLGVBQUE7QUFDRjs7QUFFQTs7Q0FBQTs7QUFHQTtFQUNFLDZCQUFBO0VBQ0EsMkJBQUE7RUFDQSxVQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLG1CQUFBO0FBQ0Y7O0FBRUE7RUFDRSxjQUFBO0VBQ0EsY0FBQTtFQUNBLGlCQUFBO0VBQ0EsV0FBQTtFQUNBLG9CQUFBO0FBQ0Y7O0FBRUE7O0NBQUE7O0FBR0E7RUFDRSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0EsZUFBQTtBQUNGOztBQUVBO0VBQ0UsY0FBQTtFQUNBLGNBQUE7RUFDQSxjQUFBO0VBQ0EsbUJBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7RUFHQSxzQkFBQTtBQUNGOztBQUVBO0VBQ0Usa0JBQUE7QUFDRjs7QUFDQTtFQUNFLHFCQUFBO0VBQ0EsVUFBQTtFQUVBLGlFQUFBO0FBRUY7O0FBQUE7O0VBRUUsV0FBQTtFQUNBLGtCQUFBO0FBR0Y7O0FBQUE7RUFDRSx5QkFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtFQUNBLGVBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUdBLGtCQUFBO0VBQ0EsWUFBQTtFQUlBLHNCQUFBO0FBR0Y7O0FBQUE7OztFQUdFLHlCQUFBO0VBQ0EsK0NBQUE7QUFHRjs7QUFBQTtFQUNFLGdCQUFBO0FBR0Y7O0FBREE7RUFDRSxlQUFBO0FBSUY7O0FBREE7RUFFRSxpRUFBQTtBQUlGOztBQU9BO0VBQ0U7SUFDRSxVQUFBO0VBSUY7RUFGQTtJQUNFLFVBQUE7RUFJRjtBQUNGIiwiZmlsZSI6ImxvZ2luLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2Jhbm5lciB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgcGFkZGluZy10b3A6IDcwcHg7XG59XG5cbiNiYW5uZXI6YWZ0ZXIge1xuICBjb250ZW50OiBcIlwiO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgcmlnaHQ6IDA7XG4gIGxlZnQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwdmg7XG4gIG9wYWNpdHk6IDAuMzU7XG4gIHotaW5kZXg6IC0xO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDA0MDQwO1xuICAtd2Via2l0LWJhY2tncm91bmQtc2l6ZTogY292ZXI7XG4gIC1tb3otYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcbiAgYmFja2dyb3VuZC1zaXplOiBjb3Zlcjtcbn1cblxuLmNhcmQtY29udGFpbmVyLmNhcmQge1xuICB3aWR0aDogMzkwcHg7XG4gIG1hcmdpbi1ib3R0b206IDBweDtcbiAgYm9yZGVyLWNvbG9yOiAjZGRkICFpbXBvcnRhbnQ7XG4gIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZmFkO1xufVxuXG4uYnRuIHtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgaGVpZ2h0OiAzNnB4O1xuICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgY3Vyc29yOiBkZWZhdWx0O1xufVxuXG4vKlxuKiBDYXJkIGNvbXBvbmVudFxuKi9cbi5jYXJkIHtcbiAgYm9yZGVyLWNvbG9yOiAjZGRkICFpbXBvcnRhbnQ7XG4gIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDtcbiAgb3BhY2l0eTogMTtcbiAgcGFkZGluZzogMjBweCA1NXB4IDUwcHg7XG4gIG1hcmdpbjogMCBhdXRvIDI1cHg7XG4gIGJvcmRlci1yYWRpdXM6IDYwcHg7XG59XG5cbi5wcm9maWxlLWltZy1jYXJkIHtcbiAgbWFyZ2luOiAwIGF1dG87XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXgtaGVpZ2h0OiAxNTBweDtcbiAgd2lkdGg6IGF1dG87XG4gIGJvcmRlci1yYWRpdXM6IDEwMHB4O1xufVxuXG4vKlxuKiBGb3JtIHN0eWxlc1xuKi9cbi5wcm9maWxlLW5hbWUtY2FyZCB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luOiAxMHB4IDAgMDtcbiAgbWluLWhlaWdodDogMWVtO1xufVxuXG4ucmVhdXRoLWVtYWlsIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGNvbG9yOiAjNDA0MDQwO1xuICBsaW5lLWhlaWdodDogMjtcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgZm9udC1zaXplOiAxNHB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbn1cblxuLmZvcm0tc2lnbmluIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuLmZvcm0tc2lnbmluIC5mb3JtLWNvbnRyb2w6Zm9jdXMge1xuICBib3JkZXItY29sb3I6IHJnYigxMDQsIDE0NSwgMTYyKTtcbiAgb3V0bGluZTogMDtcbiAgLXdlYmtpdC1ib3gtc2hhZG93OiBpbnNldCAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjA3NSksIDAgMCA4cHggcmdiKDEwNCwgMTQ1LCAxNjIpO1xuICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjA3NSksIDAgMCA4cHggcmdiKDEwNCwgMTQ1LCAxNjIpO1xufVxuLmZvcm0tc2lnbmluIGkuZmEsXG4uZm9ybS1zaWduaW4gaS5mYXMge1xuICB3aWR0aDogMTNweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4uYnRuLXNpZ25pbiB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigxMiwgOTcsIDMzKTtcbiAgcGFkZGluZzogMHB4O1xuICBmb250LXdlaWdodDogNzAwO1xuICBmb250LXNpemU6IDE0cHg7XG4gIGhlaWdodDogMzZweDtcbiAgd2lkdGg6IDEyMHB4O1xuICAtbW96LWJvcmRlci1yYWRpdXM6IDNweDtcbiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAzcHg7XG4gIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgYm9yZGVyOiBub25lO1xuICAtby10cmFuc2l0aW9uOiBhbGwgMC4yMThzO1xuICAtbW96LXRyYW5zaXRpb246IGFsbCAwLjIxOHM7XG4gIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIDAuMjE4cztcbiAgdHJhbnNpdGlvbjogYWxsIDAuMjE4cztcbn1cblxuLmJ0bi1zaWduaW46aG92ZXIsXG4uYnRuLXNpZ25pbjphY3RpdmUsXG4uYnRuLXNpZ25pbjpmb2N1cyB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMwMjU1MTc7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDAuMnJlbSByZ2JhKDQwLCAxNjcsIDY5LCAwLjUpO1xufVxuXG4uaW5wdXQtZ3JvdXAtdGV4dCBpIHtcbiAgcGFkZGluZzogNHB4IDBweDtcbn1cbmEge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5mYWRlLWxvZ2luIHtcbiAgLXdlYmtpdC1hbmltYXRpb246IGZhZGUtbG9naW4gMnMgY3ViaWMtYmV6aWVyKDAuMzksIDAuNTc1LCAwLjU2NSwgMSkgYm90aDtcbiAgYW5pbWF0aW9uOiBmYWRlLWxvZ2luIDJzIGN1YmljLWJlemllcigwLjM5LCAwLjU3NSwgMC41NjUsIDEpIGJvdGg7XG59XG5cbkAtd2Via2l0LWtleWZyYW1lcyBmYWRlLWxvZ2luIHtcbiAgMCUge1xuICAgIG9wYWNpdHk6IDA7XG4gIH1cbiAgMTAwJSB7XG4gICAgb3BhY2l0eTogMTtcbiAgfVxufVxuQGtleWZyYW1lcyBmYWRlLWxvZ2luIHtcbiAgMCUge1xuICAgIG9wYWNpdHk6IDA7XG4gIH1cbiAgMTAwJSB7XG4gICAgb3BhY2l0eTogMTtcbiAgfVxufVxuIl19 */\"]\n});","map":{"version":3,"sources":["/home/victor/Documents/codes/pos/angular/app-unipar2/src/app/layout/login/login.component.ts","/home/victor/Documents/codes/pos/angular/app-unipar2/src/app/layout/login/login.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { UserSession } from 'src/app/shared/models/user-session';\nimport { AuthService } from 'src/app/shared/services/auth.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: 'login.component.html',\n  styleUrls: ['login.component.scss']\n})\nexport class LoginComponent implements OnInit, OnDestroy {\n\n  usuario: any = { userName: null, password: null };\n  private inscricao?: Subscription;\n  private forward?: string;\n  execLogin = true;\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private authService: AuthService,\n    private router: Router,\n    private toastr: ToastrService\n  ) { }\n\n  ngOnInit(): void {\n    this.inscricao = this.activatedRoute.queryParams.subscribe((param: any) => {\n      this.forward = param.forward;\n    });\n    this.getUserLoggedIn();\n  }\n\n  ngOnDestroy(): void {\n    this.inscricao?.unsubscribe();\n  }\n\n  private async getUserLoggedIn(): Promise<void> {\n    const token = localStorage.getItem('token');\n    if (token && token !== 'null' && token !== 'undefined') {\n      await this.getUserFromToken();\n    } else {\n      this.cleanLocalResources();\n      this.execLogin = false;\n    }\n  }\n\n  redirectAfterLogin(user: UserSession): void {\n    this.authService.usuario = user;\n    this.authService.usuarioAutenticado = true;\n    this.authService.onUserChange.emit(user);\n\n    this.router.navigate([this.forward || '/']);\n  }\n\n  cleanLocalResources(): void {\n    localStorage.removeItem('token');\n  }\n\n  private async getUserFromToken(): Promise<void> {\n    this.authService.getUserFromToken().subscribe(response => {\n      this.redirectAfterLogin(response);\n    }, error => {\n      this.cleanLocalResources();\n      this.authService.usuarioAutenticado = true;\n    });\n  }\n\n  fazerLogin(): void {\n    if ((this.usuario.userName || '').trim().length === 0 || (this.usuario.password || '').trim().length === 0) {\n      this.toastr.warning('Informe o Usuário e Senha!');\n      return;\n    }\n\n    this.authService.login(this.usuario.userName, this.usuario.password).subscribe(response => {\n      localStorage.setItem('token', response.token!!);\n      this.redirectAfterLogin(response);\n    }, error => {\n      this.cleanLocalResources();\n      if (error.error && error.error.status === 401) {\n        this.toastr.error('Login/Senha inválidos');\n      } else {\n        this.toastr.error(error.error.message || error.message || 'Login/Senha inválidos');\n      }\n    });\n\n  }\n\n}\n","<div id=\"banner\">\n  <div class=\"card card-container opac fade-login\">\n    <img id=\"profile-img\" alt=\"Bem vindo\" class=\"profile-img-card\" src=\"../../../assets/imagens/angular.png\" />\n    <h3 class=\"text-center\">Bem vindo</h3>\n    <p id=\"profile-name\" class=\"profile-name-card\"></p>\n\n    <!-- Login do usuário -->\n    <form class=\"form-signin fade-in fade-in-left\" (ngSubmit)=\"fazerLogin()\">\n      <span id=\"reauth-email\" class=\"reauth-email\"></span>\n\n      <div class=\"input-group mb-3\">\n        <div class=\"input-group-prepend\">\n          <span class=\"input-group-text\"><i class=\"fa fa-user\"></i></span>\n        </div>\n        <input type=\"text\" class=\"form-control\" [(ngModel)]=\"usuario.userName\" name=\"userName\" placeholder=\"Usuário\"\n          required autofocus>\n      </div>\n\n      <div class=\"input-group mb-3\">\n        <div class=\"input-group-prepend\">\n          <span class=\"input-group-text\"><i class=\"fas fa-lock\"></i></span>\n        </div>\n        <input type=\"password\" class=\"form-control\" placeholder=\"Senha\" [(ngModel)]=\"usuario.password\" name=\"password\"\n          required>\n      </div>\n\n      <button class=\"btn btn-lg btn-success btn-signin\" type=\"submit\">\n        Login\n      </button>\n    </form>\n  </div><!-- /card-container -->\n</div><!-- /container -->\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}